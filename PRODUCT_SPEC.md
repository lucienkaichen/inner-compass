
# Inner Compass 3.0 - 產品規格書

## 1. 產品願景 (Product Vision)
一個具有文學質感、深度理解使用者的情緒管理系統。它不僅記錄情緒，更是一個能隨著使用者輸入而動態成長的「數位心理分身」。

透過 AI 的語意理解，將使用者的日記轉化為「情緒標籤」、「人格分析」與「應對工具箱」，協助使用者建立專屬的心理支持系統。

## 2. 核心體驗與介面風格 (Global Design)
*   **視覺風格**：極簡主義、紙本質感 (Paper/Ink)。
*   **字體**：全站使用 **思源宋體 (Noto Serif TC)**，營造沉穩、閱讀性的氛圍。
*   **語言**：介面預設為 **繁體中文**。保留使用者輸入的原始語言。
*   **導航結構**：五大核心分頁 (Bottom Nav on Mobile / Side Nav on Desktop)。
    1.  **輸入頁 (Journal)**
    2.  **情緒標籤 (Emotions)**
    3.  **關於我 (About Me)**
    4.  **工具箱 (Toolbox)**
    5.  **設定 (Settings)**

---

## 3. 功能模組詳解 (Feature Specs)

### 3.1 輸入頁 (Journal / Input)
網站的首頁與核心入口。
*   **頂部語錄 (Daily Quote)**：
    *   展示一則來自使用者「語錄庫」的句子。
    *   **邏輯**：依照設定 (隨機輪播 / 固定顯示)。
    *   **來源**：設定頁 > 語錄管理。
*   **萬能輸入框 (Universal Input)**：
    *   一個純粹的文字輸入區域，無須預先分類。
    *   使用者可自由書寫當下的情緒、事件、或突然的感悟。
    *   **AI 雙重處理機制 (Dual-Process Analysis)**：
        1.  **情緒面**：分析情緒成分，提取情緒標籤 (如：#焦慮, #成就感)，存入日記歷史。
        2.  **方法面**：識別文中是否包含「應對策略」或「轉念技巧」。若有，自動提取並建議加入「工具箱」。
        *   *情境範例*：「今天工作被罵很想哭(情緒)，但我試著去樓下跑了兩圈，感覺好多了(方法)。」-> AI 應同時歸檔情緒並提取「跑步」作為工具。

### 3.2 情緒標籤 (Emotion Library)
情緒的索引與檔案館。
*   **標籤列表**：展示所有出現過的情緒標籤 (由 AI 自動提取 + 使用者手動修正)。
*   **情緒專屬頁**：點擊標籤進入。
    *   **歷史回顧**：列出所有相關日記。
    *   **專屬策略**：該情緒的應對指南 (可編輯/AI 生成)。

### 3.3 關於我 (About Me)
AI 深度人格分析報告。
*   **觸發機制**：**手動觸發** (按鈕：「更新我的人格分析」)。避免每次輸入都變動，給予使用者心理準備。
*   **分析內容** (純文字為主)：
    *   **人格特質**：優點、盲點、價值觀。
    *   **情緒模式**：常見的情緒迴路、觸發點 (Triggers)。
    *   **根源探索**：基於歷史日記，連結過去事件與現在反應的因果關係。

### 3.4 工具箱 (Toolbox)
使用者的心理急救包與快樂百寶箱。
*   **展示方式**：卡片式列表，點擊可查看詳情或相關日記。
*   **資料來源**：
    1.  **AI 自動提取**：從日記中識別出的有效方法 (需使用者確認後加入)。
    2.  **手動輸入**：使用者直接在這個分頁新增 (例如：心理學概念、一句話、一個行動)。
    3.  **AI 生成建議**：系統主動提供的心理學技巧 (如：正念、認知重構)。

### 3.5 設定 (Settings)
*   **語錄管理**：
    *   CRUD (新增/讀取/修改/刪除) 語錄。
    *   設定輪播模式 (隨機 / 指定)。
*   **系統設定**：
    *   深色模式切換。
    *   資料匯出/備份。

---

## 4. 技術架構調整 (Tech Stack Changes)

### 4.1 資料庫模型 (Schema Changes)
*   **Quote**: 儲存語錄 (content, isActive, etc.)。
*   **Tool**: 儲存工具箱項目 (title, content, category, originEntryId)。
*   **Profile**: 儲存「關於我」的分析報告 (content, updatedAt)。
*   **Entry**: 增加與 Tool 的關聯。

### 4.2 AI Prompt Engineering
*   **Input Processor**: 需設計一個能同時輸出 `EmotionTags` 和 `ToolSuggestions` 的複雜 Prompt。
*   **Profile Generator**: 需設計一個能讀取大量歷史日記並歸納人格特質的 Long-Context Prompt。

---

## 5. 開發階段 (Development Phases)
*   **Phase 1**: 基礎架構更新 (字體、Layout、五大分頁空殼)。
*   **Phase 2**: 設定頁與語錄系統 (最簡單，先做)。
*   **Phase 3**: 輸入頁與 AI 雙重分析邏輯 (核心)。
*   **Phase 4**: 工具箱與關於我 (進階 AI 應用)。
